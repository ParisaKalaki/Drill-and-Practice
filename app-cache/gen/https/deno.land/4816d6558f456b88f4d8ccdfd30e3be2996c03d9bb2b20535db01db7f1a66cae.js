import { required } from "./required.ts";
import { optionallyValid } from "../utils.ts";
export function requiredWhen(callback) {
    return async function requiredWhenRule(value, utils) {
        const result = callback(value, utils);
        const isRequired = result instanceof Promise ? await result : result;
        if (isRequired) {
            return required(value);
        }
        return optionallyValid(true);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvdmFsaWRhc2F1ckB2MC4xNS4wL3NyYy9ydWxlcy9yZXF1aXJlZF93aGVuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVmFsaWRpdHksIFJ1bGUgfSBmcm9tIFwiLi4vdHlwZXMudHNcIjtcbmltcG9ydCB0eXBlIHsgVmFsaWRhdGlvblV0aWxzIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMudHNcIjtcbmltcG9ydCB7IHJlcXVpcmVkIH0gZnJvbSBcIi4vcmVxdWlyZWQudHNcIjtcbmltcG9ydCB7IG9wdGlvbmFsbHlWYWxpZCB9IGZyb20gXCIuLi91dGlscy50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZWRXaGVuKFxuICBjYWxsYmFjazogKFxuICAgIGZpZWxkVmFsdWU6IGFueSxcbiAgICB2YWxpZGF0aW9uVXRpbHM6IFZhbGlkYXRpb25VdGlscyxcbiAgKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPixcbik6IFJ1bGUge1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gcmVxdWlyZWRXaGVuUnVsZShcbiAgICB2YWx1ZTogYW55LFxuICAgIHV0aWxzOiBWYWxpZGF0aW9uVXRpbHMsXG4gICk6IFByb21pc2U8VmFsaWRpdHk+IHtcbiAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgdXRpbHMpO1xuICAgIGNvbnN0IGlzUmVxdWlyZWQgPSByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICByZXR1cm4gcmVxdWlyZWQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9uYWxseVZhbGlkKHRydWUpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLFNBQVMsUUFBUSxRQUFRLGdCQUFnQjtBQUN6QyxTQUFTLGVBQWUsUUFBUSxjQUFjO0FBRTlDLE9BQU8sU0FBUyxhQUNkLFFBRytCLEVBQ3pCO0lBQ04sT0FBTyxlQUFlLGlCQUNwQixLQUFVLEVBQ1YsS0FBc0IsRUFDSDtRQUNuQixNQUFNLFNBQVMsU0FBUyxPQUFPO1FBQy9CLE1BQU0sYUFBYSxrQkFBa0IsVUFBVSxNQUFNLFNBQVMsTUFBTTtRQUNwRSxJQUFJLFlBQVk7WUFDZCxPQUFPLFNBQVM7UUFDbEIsQ0FBQztRQUNELE9BQU8sZ0JBQWdCLElBQUk7SUFDN0I7QUFDRixDQUFDIn0=